---
- name: Install OCP Platform Plus Infrastructure Components
  gather_facts: false
  hosts: localhost
  tasks:
    - debug:
        msg: "Provisioning and Configuring OCP Cluster with Platform Plus on AWS"

- name: Provision OCP Cluster on AWS via IPI
  ansible.builtin.import_playbook: ../playbooks/ocp/provision-cluster.yaml

- name: Creating Default Cluster Auth
  ansible.builtin.import_playbook: ../playbooks/ocp/create-default-auth.yaml

- name: Creating Infra MachineSet
  ansible.builtin.import_playbook: ../playbooks/ocp/aws-create-infra-machineset.yaml

- name: Install ACM
  ansible.builtin.import_playbook: ../playbooks/ocp/install-acm.yaml

- name: Install ACS
  ansible.builtin.import_playbook: ../playbooks/acm/install-acs-via-acm.yaml

- name: Install Pipelines
  ansible.builtin.import_playbook: ../playbooks/acm/install-pipelines-via-acm.yaml

- name: Cluster Provisioning Complete
  gather_facts: false
  hosts: localhost
  tasks:
    - debug:
        msg: "Cluster provisioning complete. Cluster can be accessed at: https://console-openshift-console.apps.{{ ocp_cluster.name }}.{{ ocp_cluster.base_domain }}/"
...